import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import * as Localization from 'expo-localization';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { STORAGE_KEYS, LANGUAGES } from '../constants';

// Arabic translations
const ar = {
  common: {
    loading: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
    error: 'Ø®Ø·Ø£',
    success: 'Ù†Ø¬Ø­',
    cancel: 'Ø¥Ù„ØºØ§Ø¡',
    confirm: 'ØªØ£ÙƒÙŠØ¯',
    save: 'Ø­ÙØ¸',
    edit: 'ØªØ¹Ø¯ÙŠÙ„',
    delete: 'Ø­Ø°Ù',
    search: 'Ø¨Ø­Ø«',
    filter: 'ØªØµÙÙŠØ©',
    refresh: 'ØªØ­Ø¯ÙŠØ«',
    retry: 'Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©',
    back: 'Ø±Ø¬ÙˆØ¹',
    next: 'Ø§Ù„ØªØ§Ù„ÙŠ',
    previous: 'Ø§Ù„Ø³Ø§Ø¨Ù‚',
    submit: 'Ø¥Ø±Ø³Ø§Ù„',
    close: 'Ø¥ØºÙ„Ø§Ù‚',
    yes: 'Ù†Ø¹Ù…',
    no: 'Ù„Ø§',
    ok: 'Ù…ÙˆØ§ÙÙ‚',
    required: 'Ù…Ø·Ù„ÙˆØ¨',
    online: 'Ù…ØªØµÙ„',
    offline: 'ØºÙŠØ± Ù…ØªØµÙ„',
    quickActions: 'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©',
    view: 'Ø¹Ø±Ø¶',
    changeLanguage: 'ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©',
    changeLanguageConfirm: 'Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©ØŸ Ø³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.',
    languageChangeError: 'ÙØ´Ù„ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
    restartRequired: 'Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨Ø©',
    restartRequiredMessage: 'Ø³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„ØªØ·Ø¨ÙŠÙ‚ ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©.',
    unexpectedError: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹',
    justNow: 'Ø§Ù„Ø¢Ù†',
    hoursAgo: 'Ù…Ù†Ø° {{count}} Ø³Ø§Ø¹Ø©',
    dismiss: 'Ø¥ØºÙ„Ø§Ù‚',
    button: 'Ø²Ø±',
  },
  auth: {
    login: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',
    logout: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
    email: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
    password: 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
    forgotPassword: 'Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ',
    loginFailed: 'ÙØ´Ù„ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',
    invalidCredentials: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ ØºÙŠØ± ØµØ­ÙŠØ­Ø©',
    welcome: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ',
    enterEmail: 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
    enterPassword: 'Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
    invalidEmail: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­',
    passwordTooShort: 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹',
    required: 'Ù…Ø·Ù„ÙˆØ¨',
    welcomeBack: 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ',
    loginSubtitle: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.',
    emailPasswordRequired: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
    loggingIn: 'Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...',

    noAccount: 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ',
    signUp: 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨',
    logoutConfirm: 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ',
    logoutError: 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
  },
  app: {
    name: 'Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
  },
  navigation: {
    dashboard: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
    trainingRequests: 'Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    calendar: 'Ø§Ù„ØªÙ‚ÙˆÙŠÙ…',
    chat: 'Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©',
    profile: 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ',
    analytics: 'Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª',
  },
  dashboard: {
    upcomingTrainings: 'Ø§Ù„ØªØ¯Ø±ÙŠØ¨Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©',
    trainings: {
      leadership: 'ØªØ·ÙˆÙŠØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©',
      projectManagement: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹',
    },
  },
  trainingRequests: {
    title: 'Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    createNew: 'Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯',
    requestTitle: 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø·Ù„Ø¨',
    description: 'Ø§Ù„ÙˆØµÙ',
    province: 'Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©',
    center: 'Ø§Ù„Ù…Ø±ÙƒØ²',
    priority: 'Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©',
    status: 'Ø§Ù„Ø­Ø§Ù„Ø©',
    requestedDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨',
    approvedDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©',
    trainer: 'Ø§Ù„Ù…Ø¯Ø±Ø¨',
    notes: 'Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª',
    approve: 'Ù…ÙˆØ§ÙÙ‚Ø©',
    reject: 'Ø±ÙØ¶',
    assignTrainer: 'ØªØ¹ÙŠÙŠÙ† Ù…Ø¯Ø±Ø¨',
    pending: 'Ù…Ø¹Ù„Ù‚Ø©',
    completed: 'Ù…ÙƒØªÙ…Ù„Ø©',
    requestedBy: 'Ø·Ù„Ø¨ Ù…Ù†',
    newRequest: 'Ø·Ù„Ø¨ ØªØ¯Ø±ÙŠØ¨ Ø¬Ø¯ÙŠØ¯',
    trainingName: 'Ø§Ø³Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    selectTraining: 'Ø§Ø®ØªØ± ØªØ¯Ø±ÙŠØ¨Ø§Ù‹',
    userProvince: '[Ù…Ø­Ø§ÙØ¸Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…]',
    trainingDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    startingTime: 'ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©',
    submitRequest: 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨',
    attachments: 'Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª',
    specialization: 'Ø§Ù„ØªØ®ØµØµ',
    statuses: {
      submitted: 'Ù…ÙØ±Ø³Ù„',
      under_review: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©',
      cc_approved: 'Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ù†Ø³Ù‚',
      sv_approved: 'Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø´Ø±Ù',
      pm_approved: 'Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø¯ÙŠØ±',
      tr_assigned: 'ØªÙ… ØªØ¹ÙŠÙŠÙ† Ù…Ø¯Ø±Ø¨',
      final_approved: 'Ù…ÙˆØ§ÙÙ‚Ø© Ù†Ù‡Ø§Ø¦ÙŠØ©',
      in_progress: 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°',
      completed: 'Ù…ÙƒØªÙ…Ù„',
      rejected: 'Ù…Ø±ÙÙˆØ¶',
      cancelled: 'Ù…Ù„ØºÙŠ',
    },
    noPendingRequests: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©',
    noCompletedRequests: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©',
    enterDescription: 'Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    enterSpecialization: 'Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ',
    duration: 'Ø§Ù„Ù…Ø¯Ø© (Ø³Ø§Ø¹Ø§Øª)',
    enterDuration: 'Ø£Ø¯Ø®Ù„ Ù…Ø¯Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¨Ø§Ù„Ø³Ø§Ø¹Ø§Øª',
    maxParticipants: 'Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†',
    enterMaxParticipants: 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†',
    requestDetails: 'ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨',
    requestInfo: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨',
    requesterInfo: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨',
    trainerInfo: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø¨',
    name: 'Ø§Ù„Ø§Ø³Ù…',
    hours: 'Ø³Ø§Ø¹Ø©',
    enterTrainingName: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    requestSubmitted: 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¨Ù†Ø¬Ø§Ø­',
    requests: {
      leadership: 'ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©',
      technicalSkills: 'Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©...',
      projectManagement: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹...',
      communication: 'Ø§Ù„ØªÙˆØ§ØµÙ„...',
      dataAnalysis: 'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
    },
    priorities: {
      low: 'Ù…Ù†Ø®ÙØ¶Ø©',
      medium: 'Ù…ØªÙˆØ³Ø·Ø©',
      high: 'Ø¹Ø§Ù„ÙŠØ©',
    },
  },
  chat: {
    title: 'Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª',
    newMessage: 'Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©',
    typeMessage: 'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©...',
    send: 'Ø¥Ø±Ø³Ø§Ù„',
    online: 'Ù…ØªØµÙ„',
    offline: 'ØºÙŠØ± Ù…ØªØµÙ„',
    lastSeen: 'Ø¢Ø®Ø± Ø¸Ù‡ÙˆØ±',
    noMessages: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„',
    searchChats: 'Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª',
    noChats: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§Ø¯Ø«Ø§Øª',
    loading: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
    loadingMessages: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„...',
    createChat: 'Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©',
    selectChatType: 'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©',
    directChat: 'Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¨Ø§Ø´Ø±Ø©',
    groupChat: 'Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©',
    createFirstChat: 'Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ù…Ø­Ø§Ø¯Ø«Ø©',
    noSearchResults: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø­Ø«',
    startConversation: 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø¢Ù†',
    types: {
      direct: 'Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¨Ø§Ø´Ø±Ø©',
      group: 'Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©',
      announcement: 'Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©',
      coordination: 'ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªÙ†Ù…ÙŠØ©',
      trainingTeam: 'ÙØ±ÙŠÙ‚ Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    },
    errors: {
      noPermission: 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª',
      cannotSend: 'Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©',
      loadFailed: 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª',
      sendFailed: 'ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©',
    },
  },
  calendar: {
    title: 'Ø§Ù„ØªÙ‚ÙˆÙŠÙ…',
    today: 'Ø§Ù„ÙŠÙˆÙ…',
    month: 'Ø´Ù‡Ø±',
    week: 'Ø£Ø³Ø¨ÙˆØ¹',
    day: 'ÙŠÙˆÙ…',
    event: 'Ø­Ø¯Ø«',
    training: 'ØªØ¯Ø±ÙŠØ¨',
    meeting: 'Ø§Ø¬ØªÙ…Ø§Ø¹',
    noEvents: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø­Ø¯Ø§Ø«',
    eventsForDate: 'Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„ØªØ§Ø±ÙŠØ® {{date}}',
  },
  profile: {
    title: 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ',
    personalInfo: 'Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©',
    fullName: 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„',
    email: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
    phone: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ',
    role: 'Ø§Ù„Ø¯ÙˆØ±',
    province: 'Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©',
    center: 'Ø§Ù„Ù…Ø±ÙƒØ²',
    settings: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
    language: 'Ø§Ù„Ù„ØºØ©',
    theme: 'Ø§Ù„Ù…Ø¸Ù‡Ø±',
    notifications: 'Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',
    changePassword: 'ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
    noName: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø³Ù…',
    notSet: 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯',
    light: 'ÙØ§ØªØ­',
    help: 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©',
    about: 'Ø­ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',
  },
  analytics: {
    title: 'Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª',
    subtitle: 'ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…',
    overview: 'Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©',
    totalRequests: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
    completedRequests: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©',
    pendingRequests: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©',
    averageProcessingTime: 'Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
    provinceStats: 'Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª',
    trainerRatings: 'ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø¨ÙŠÙ†',
    comingSoon: 'Ù‚Ø±ÙŠØ¨Ø§Ù‹',
    comingSoonDescription: 'Ù†Ø¹Ù…Ù„ Ø¹Ù„Ù‰ ØªØ·ÙˆÙŠØ± Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„Ø§Øª Ù…ØªÙ‚Ø¯Ù… Ù„ØªÙˆÙÙŠØ± Ø±Ø¤Ù‰ Ø´Ø§Ù…Ù„Ø© Ø­ÙˆÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„ØªØ¯Ø±ÙŠØ¨Ø§Øª.',
  },
  notifications: {
    title: 'Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',
    loading: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª...',
    markAllRead: 'ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡',
    markAllReadConfirm: 'Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ø¯ÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø©ØŸ',
    deleteNotification: 'Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±',
    deleteConfirm: 'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±ØŸ',
    noNotifications: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',
    noUnread: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡Ø©',
    all: 'Ø§Ù„ÙƒÙ„',
    unread: 'ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡',
    justNow: 'Ø§Ù„Ø¢Ù†',
    minutesAgo: 'Ù…Ù†Ø° {{count}} Ø¯Ù‚ÙŠÙ‚Ø©',
    hoursAgo: 'Ù…Ù†Ø° {{count}} Ø³Ø§Ø¹Ø©',
    daysAgo: 'Ù…Ù†Ø° {{count}} ÙŠÙˆÙ…',
    newTrainingRequest: 'Ø·Ù„Ø¨ ØªØ¯Ø±ÙŠØ¨ Ø¬Ø¯ÙŠØ¯',
    requestApproved: 'ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨',
    requestRejected: 'ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨',
    trainerAssigned: 'ØªÙ… ØªØ¹ÙŠÙŠÙ† Ù…Ø¯Ø±Ø¨',
    newMessage: 'Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©',
  },
  fileUpload: {
    addImage: 'Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©',
    addDocument: 'Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ†Ø¯',
    uploading: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...',
    uploadFailed: 'ÙØ´Ù„ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù',
    removeFile: 'Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù',
    removeFileConfirm: 'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„ÙØŸ',
    maxFiles: 'Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ {{count}} Ù…Ù„ÙØ§Øª',
    maxSize: 'Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 10 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª',
  },
  networkStatus: {
    online: 'Ù…ØªØµÙ„',
    offline: 'ØºÙŠØ± Ù…ØªØµÙ„',
    syncing: 'Ù…Ø²Ø§Ù…Ù†Ø© {{count}} Ø¹Ù†ØµØ±',
    offlineBanner: 'Ø£Ù†Øª ØªØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ù†ØªØ±Ù†Øª',
    pendingActions: '{{count}} Ø¥Ø¬Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±',
  },
  rating: {
    overallRating: 'Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ø§Ù…',
    detailedRating: 'Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØªÙØµÙŠÙ„ÙŠ',
    contentQuality: 'Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰',
    delivery: 'Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…',
    materials: 'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©',
    interaction: 'Ø§Ù„ØªÙØ§Ø¹Ù„',
    comments: 'Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª',
    commentsPlaceholder: 'Ø´Ø§Ø±ÙƒÙ†Ø§ Ø±Ø£ÙŠÙƒ ÙˆÙ…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ...',
    submitRating: 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…',
    pleaseSelectRating: 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØªÙ‚ÙŠÙŠÙ…',
    poor: 'Ø¶Ø¹ÙŠÙ',
    fair: 'Ù…Ù‚Ø¨ÙˆÙ„',
    good: 'Ø¬ÙŠØ¯',
    veryGood: 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹',
    excellent: 'Ù…Ù…ØªØ§Ø²',
    notRated: 'ØºÙŠØ± Ù…Ù‚ÙŠÙ…',
    outOfFive: 'Ù…Ù† 5',
    rateTraining: 'Ù‚ÙŠÙ… Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    rateYourExperience: 'Ù‚ÙŠÙ… ØªØ¬Ø±Ø¨ØªÙƒ Ù…Ø¹ Ù‡Ø°Ø§ Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
    ratingSubmitted: 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­',
  },
  theme: {
    selectTheme: 'Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø«ÙŠÙ…',
    light: 'ÙØ§ØªØ­',
    dark: 'Ø¯Ø§ÙƒÙ†',
    system: 'Ø§Ù„Ù†Ø¸Ø§Ù…',
    lightDescription: 'Ù…Ø¸Ù‡Ø± ÙØ§ØªØ­ ÙˆÙ…Ø´Ø±Ù‚',
    darkDescription: 'Ù…Ø¸Ù‡Ø± Ø¯Ø§ÙƒÙ† ÙˆÙ…Ø±ÙŠØ­ Ù„Ù„Ø¹ÙŠÙ†',
    systemDescription: 'ÙŠØªØ¨Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…',
    preview: 'Ù…Ø¹Ø§ÙŠÙ†Ø©',
    previewText: 'Ù‡Ø°Ø§ Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø«ÙŠÙ…',
  },

  offline: {
    title: 'ÙˆØ¶Ø¹ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„',
    message: 'Ø£Ù†Øª ØªØ¹Ù…Ù„ ÙÙŠ ÙˆØ¶Ø¹ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„. Ø³ÙŠØªÙ… Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù†Ø¯ Ø¹ÙˆØ¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„.',
    queuedActions: 'Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø¤Ø¬Ù„Ø©',
    syncWhenOnline: 'Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„',
  },
  errors: {
    networkError: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©',
    serverError: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…',
    unknownError: 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
    validationError: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚',
    authenticationError: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©',
    permissionError: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª',
  },
};

// English translations
const en = {
  common: {
    loading: 'Loading...',
    error: 'Error',
    success: 'Success',
    cancel: 'Cancel',
    confirm: 'Confirm',
    save: 'Save',
    edit: 'Edit',
    delete: 'Delete',
    search: 'Search',
    filter: 'Filter',
    refresh: 'Refresh',
    retry: 'Retry',
    back: 'Back',
    next: 'Next',
    previous: 'Previous',
    submit: 'Submit',
    close: 'Close',
    yes: 'Yes',
    no: 'No',
    ok: 'OK',
    required: 'required',
    online: 'Online',
    offline: 'Offline',
    quickActions: 'Quick Actions',
    view: 'View',
    changeLanguage: 'Change Language',
    changeLanguageConfirm: 'Do you want to change the language? The app will restart.',
    languageChangeError: 'Failed to change language. Please try again.',
    restartRequired: 'Restart Required',
    restartRequiredMessage: 'The app will restart to apply the language change.',
    unexpectedError: 'An unexpected error occurred',
    justNow: 'Just now',
    hoursAgo: '{{count}} hours ago',
    dismiss: 'Dismiss',
    button: 'Button',
  },
  auth: {
    login: 'Login',
    logout: 'Logout',
    email: 'Email',
    password: 'Password',
    forgotPassword: 'Forgot Password?',
    loginFailed: 'Login Failed',
    invalidCredentials: 'Invalid Credentials',
    welcome: 'Welcome',
    enterEmail: 'Enter email',
    enterPassword: 'Enter password',
    invalidEmail: 'Invalid email',
    passwordTooShort: 'Password too short',
    required: 'required',
    welcomeBack: 'Welcome back',
    loginSubtitle: 'Please enter your credentials to login.',
    emailPasswordRequired: 'Please enter email and password',
    loggingIn: 'Logging in...',

    noAccount: "Don't have an account?",
    signUp: 'Sign up',
    logoutConfirm: 'Are you sure you want to logout?',
    logoutError: 'An error occurred while logging out',
  },
  app: {
    name: 'Training Program',
  },
  navigation: {
    dashboard: 'Dashboard',
    trainingRequests: 'Training Requests',
    calendar: 'Calendar',
    chat: 'Chat',
    profile: 'Profile',
    analytics: 'Analytics',
  },
  dashboard: {
    upcomingTrainings: 'Upcoming Trainings',
    trainings: {
      leadership: 'Leadership Development',
      projectManagement: 'Project Management',
    },
  },
  trainingRequests: {
    title: 'Training Requests',
    createNew: 'Create New Request',
    requestTitle: 'Request Title',
    description: 'Description',
    province: 'Province',
    center: 'Center',
    priority: 'Priority',
    status: 'Status',
    requestedDate: 'Requested Date',
    approvedDate: 'Approved Date',
    trainer: 'Trainer',
    notes: 'Notes',
    approve: 'Approve',
    reject: 'Reject',
    assignTrainer: 'Assign Trainer',
    pending: 'Pending',
    completed: 'Completed',
    requestedBy: 'Requested by',
    newRequest: 'New Training Request',
    trainingName: 'Training Name',
    selectTraining: 'Select a training',
    userProvince: "[User's Province]",
    trainingDate: 'Training Date',
    startingTime: 'Starting Time',
    submitRequest: 'Submit Request',
    attachments: 'Attachments',
    specialization: 'Specialization',
    noPendingRequests: 'No pending requests',
    noCompletedRequests: 'No completed requests',
    enterDescription: 'Enter training description',
    enterSpecialization: 'Enter specialization',
    duration: 'Duration (hours)',
    enterDuration: 'Enter training duration in hours',
    maxParticipants: 'Maximum Participants',
    enterMaxParticipants: 'Enter maximum number of participants',
    requestDetails: 'Request Details',
    requestInfo: 'Request Information',
    requesterInfo: 'Requester Information',
    trainerInfo: 'Trainer Information',
    name: 'Name',
    hours: 'hours',
    enterTrainingName: 'Please enter a training name',
    requestSubmitted: 'Training request submitted successfully',
    requests: {
      leadership: 'Leadership Training',
      technicalSkills: 'Technical Skills...',
      projectManagement: 'Project Management...',
      communication: 'Communication...',
      dataAnalysis: 'Data Analysis',
    },
    statuses: {
      under_review: 'Under Review',
      cc_approved: 'Center Coordinator Approved',
      sv_approved: 'Supervisor Approved',
      pm_approved: 'Project Manager Approved',
      tr_assigned: 'Trainer Assigned',
      final_approved: 'Final Approved',
      completed: 'Completed',
      rejected: 'Rejected',
    },
    priorities: {
      low: 'Low',
      medium: 'Medium',
      high: 'High',
    },
  },
  chat: {
    title: 'Chat',
    newMessage: 'New Message',
    typeMessage: 'Type a message...',
    send: 'Send',
    online: 'Online',
    offline: 'Offline',
    lastSeen: 'Last seen',
    noMessages: 'No messages',
    searchChats: 'Search chats',
    noChats: 'No chats',
    loading: 'Loading...',
    loadingMessages: 'Loading messages...',
    createChat: 'Create New Chat',
    selectChatType: 'Select chat type',
    directChat: 'Direct Chat',
    groupChat: 'Group Chat',
    createFirstChat: 'Create First Chat',
    noSearchResults: 'No search results',
    startConversation: 'Start the conversation now',
    types: {
      direct: 'Direct Chat',
      group: 'Group Chat',
      announcement: 'Official Announcements',
      coordination: 'Development Coordination',
      trainingTeam: 'Training Team',
    },
    errors: {
      noPermission: 'You do not have permission to create chats',
      cannotSend: 'You cannot send messages in this chat',
      loadFailed: 'Failed to load chats',
      sendFailed: 'Failed to send message',
    },
  },
  calendar: {
    title: 'Calendar',
    today: 'Today',
    month: 'Month',
    week: 'Week',
    day: 'Day',
    event: 'Event',
    training: 'Training',
    meeting: 'Meeting',
    noEvents: 'No events',
    eventsForDate: 'Events for {{date}}',
  },
  profile: {
    title: 'Profile',
    personalInfo: 'Personal Information',
    fullName: 'Full Name',
    email: 'Email',
    phone: 'Phone',
    role: 'Role',
    province: 'Province',
    center: 'Center',
    settings: 'Settings',
    language: 'Language',
    theme: 'Theme',
    notifications: 'Notifications',
    changePassword: 'Change Password',
    noName: 'No Name',
    notSet: 'Not Set',
    light: 'Light',
    help: 'Help',
    about: 'About',
  },
  analytics: {
    title: 'Analytics',
    subtitle: 'Comprehensive system performance analysis',
    overview: 'Overview',
    totalRequests: 'Total Requests',
    completedRequests: 'Completed Requests',
    pendingRequests: 'Pending Requests',
    averageProcessingTime: 'Average Processing Time',
    provinceStats: 'Province Statistics',
    trainerRatings: 'Trainer Ratings',
    comingSoon: 'Coming Soon',
    comingSoonDescription: 'We are working on developing an advanced analytics system to provide comprehensive insights into system performance and training.',
  },
  notifications: {
    title: 'Notifications',
    loading: 'Loading notifications...',
    markAllRead: 'Mark All Read',
    markAllReadConfirm: 'Do you want to mark all notifications as read?',
    deleteNotification: 'Delete Notification',
    deleteConfirm: 'Do you want to delete this notification?',
    noNotifications: 'No notifications',
    noUnread: 'No unread notifications',
    all: 'All',
    unread: 'Unread',
    justNow: 'Just now',
    minutesAgo: '{{count}} minutes ago',
    hoursAgo: '{{count}} hours ago',
    daysAgo: '{{count}} days ago',
    newTrainingRequest: 'New Training Request',
    requestApproved: 'Request Approved',
    requestRejected: 'Request Rejected',
    trainerAssigned: 'Trainer Assigned',
    newMessage: 'New Message',
  },
  fileUpload: {
    addImage: 'Add Image',
    addDocument: 'Add Document',
    uploading: 'Uploading...',
    uploadFailed: 'Failed to upload file',
    removeFile: 'Remove File',
    removeFileConfirm: 'Do you want to remove this file?',
    maxFiles: 'Maximum {{count}} files',
    maxSize: 'Maximum 10MB',
  },
  networkStatus: {
    online: 'Online',
    offline: 'Offline',
    syncing: 'Syncing {{count}} items',
    offlineBanner: 'You are working offline',
    pendingActions: '{{count}} pending actions',
  },
  rating: {
    overallRating: 'Overall Rating',
    detailedRating: 'Detailed Rating',
    contentQuality: 'Content Quality',
    delivery: 'Delivery',
    materials: 'Training Materials',
    interaction: 'Interaction',
    comments: 'Comments',
    commentsPlaceholder: 'Share your feedback and comments...',
    submitRating: 'Submit Rating',
    pleaseSelectRating: 'Please select a rating',
    poor: 'Poor',
    fair: 'Fair',
    good: 'Good',
    veryGood: 'Very Good',
    excellent: 'Excellent',
    notRated: 'Not Rated',
    outOfFive: 'out of 5',
    rateTraining: 'Rate Training',
    rateYourExperience: 'Rate your experience with this training',
    ratingSubmitted: 'Rating submitted successfully',
  },
  theme: {
    selectTheme: 'Select Theme',
    light: 'Light',
    dark: 'Dark',
    system: 'System',
    lightDescription: 'Bright and clean appearance',
    darkDescription: 'Dark and easy on the eyes',
    systemDescription: 'Follows system settings',
    preview: 'Preview',
    previewText: 'This is sample text to preview the theme',
  },
  offline: {
    title: 'Offline Mode',
    message: 'You are working offline. Changes will be synced when connection is restored.',
    queuedActions: 'Queued Actions',
    syncWhenOnline: 'Will sync when online',
  },
  errors: {
    networkError: 'Network Error',
    serverError: 'Server Error',
    unknownError: 'Unknown Error',
    validationError: 'Validation Error',
    authenticationError: 'Authentication Error',
    permissionError: 'Permission Error',
  },
};

const resources = {
  ar: { translation: ar },
  en: { translation: en },
};

const initI18n = async () => {
  let savedLanguage = await AsyncStorage.getItem(STORAGE_KEYS.LANGUAGE);

  if (!savedLanguage) {
    // Detect device language
    const deviceLanguage = Localization.getLocales()[0]?.languageCode || 'en';
    savedLanguage = deviceLanguage === 'ar' ? LANGUAGES.ARABIC : LANGUAGES.ENGLISH;
    // Save the detected language
    await AsyncStorage.setItem(STORAGE_KEYS.LANGUAGE, savedLanguage);
  }

  await i18n.use(initReactI18next).init({
    resources,
    lng: savedLanguage,
    fallbackLng: LANGUAGES.ENGLISH,
    interpolation: {
      escapeValue: false,
    },
    react: {
      useSuspense: false,
    },
  });

  // Set up RTL based on the language
  const { I18nManager } = await import('react-native');
  const shouldBeRTL = savedLanguage === LANGUAGES.ARABIC;
  I18nManager.allowRTL(true);

  // Only force RTL if it's different from current state
  if (shouldBeRTL !== I18nManager.getConstants().isRTL) {
    I18nManager.forceRTL(shouldBeRTL);
  }
};

export const changeLanguage = async (language: string) => {
  try {
    console.log('ðŸŒ Changing language to:', language);

    await AsyncStorage.setItem(STORAGE_KEYS.LANGUAGE, language);
    await i18n.changeLanguage(language);

    // Set up RTL for the new language
    const { I18nManager, Platform } = await import('react-native');
    const shouldBeRTL = language === LANGUAGES.ARABIC;

    console.log('ðŸ“± Current RTL state:', I18nManager.getConstants().isRTL);
    console.log('ðŸ”„ Should be RTL:', shouldBeRTL);

    // Always enable RTL support
    I18nManager.allowRTL(true);

    // Force RTL layout change
    if (shouldBeRTL !== I18nManager.getConstants().isRTL) {
      console.log('ðŸ”„ Forcing RTL layout change...');
      I18nManager.forceRTL(shouldBeRTL);

      // On native platforms, the app will restart automatically
      // On web, we need to reload manually
      if (Platform.OS === 'web') {
        console.log('ðŸŒ Reloading web app for RTL changes...');
        setTimeout(() => {
          window.location.reload();
        }, 100);
      } else {
        console.log('ðŸ“± App will restart automatically for RTL changes...');
      }
    } else {
      console.log('âœ… RTL state already correct, no restart needed');
    }
  } catch (error) {
    console.error('âŒ Error changing language:', error);
    throw error;
  }
};

export const getCurrentLanguage = () => i18n.language;
export const isRTL = () => i18n.language === LANGUAGES.ARABIC;

initI18n();

export default i18n;
